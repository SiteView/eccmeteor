<Template name="moitorContent">
	<div class="tab-pane active" id="1">
		<div class="row-fluid">
			<div class="span3">
				<!-- 
				<div id="svse_tree" class="well"></div>
				
				-->
				<div class="well">
					<ul id="treeDemo" class="ztree"></ul>
				</div>
			</div>
			<div class="span9">
				{{> operateNode}}
				{{> body}}
			</div>
		</div>	
	</div>
</Template>

<Template name="body"><!-- 视图选择 -->
	<div class="row-fluid">
	{{#if equal viewstatus "GroupAndEntity"}}
		{{> showGroupAndEntity}}
	{{/if}}
	{{#if equal viewstatus "Monitor"}}
		{{> showMonitor}}
		{{> svg}}
	{{/if}}
	{{#if equal viewstatus "EntityGroup"}}
		{{> showEntityGroup}}
	{{/if}}
	{{#if equal viewstatus "EntityItem"}}
		{{> showEntity}}
	{{/if}}
	{{#if equal viewstatus "EntityEdit"}}
		{{> showEditEntity}}
	{{/if}}
	{{#if equal viewstatus "GroupAdd"}}
		{{> showGroupAdd}}
	{{/if}}
	{{#if equal viewstatus "GroupEdit"}}
		{{> showGroupEdit}}
	{{/if}}
	{{#if equal viewstatus "MonitorTemplates"}}
		{{> showMonitorTemplate}}
	{{/if}}
	{{#if equal viewstatus "MonitorAdd"}}
		{{> showMonitorInfo}}
	{{/if}}
	{{#if equal viewstatus "MonitorEdit"}}
		{{> showMonitorEditInfo}}
	{{/if}}
	{{#if equal viewstatus "QuicklyAddMonity"}}
		{{> showQuickMonityTemplate}}
	{{/if}}
	{{#if equal viewstatus "MonitorDetail"}}
		{{> detailSvg}}
	{{/if}}
	</div>
</Template>

<Template name="showMonitor"><!--展示监视器信息 -->
	<table class="table table-striped table-bordered table-condensed">
		<thead>
			<tr>
				<th>状态</th><th>SV_ID</th><th>名称</th><th>描述</th><th>最后更新时间</th>
			</tr>
		</thead>
		<tbody id="showMonitorList">
		{{#each getChildrenNodesByIdAndType entityid "submonitor"}}
			<tr id="{{sv_id}}" title="{{status}}">
				<td>{{status}}</td>
				<td>{{sv_id}}</td>
				<td>{{sv_name}}</td>
				<td>{{dstr}}</td>
				<td>{{creat_time}}</td>
			</tr>
		{{/each}}
		</tbody>
	</table>
</Template>

<Template name="showGroupAndEntity"> <!--展示设备和组信息 -->
	<span class="label">子组</span>
	<br /> <br />
	<table class="table table-striped table-bordered table-condensed">
		<thead>
			<tr>
				<th>状态</th><th>SV_ID</th><th>名称</th><th>设备数</th><th>监控器数</th><th>禁止数</th><th>错误</th><th>危险</th><th>描述信息</th><th>依靠</th>
			</tr>
		</thead>
		<tbody>
		{{#each getChildrenNodesByIdAndType svid "subgroup"}}
			<tr>
				<td>{{status}}</td>
				<td>{{sv_id}}</td>
				<td>{{sv_name}}</td>
				<td>{{sub_entity_sum}}</td>
				<td>{{sub_monitor_sum}}</td>
				<td>{{sub_monitor_disable_sum}}</td>
				<td>{{sub_monitor_error_sum}}</td>
				<td>{{sub_monitor_warning_sum}}</td>
				<td>{{sv_description}}</td>
				<td>{{sv_dependson}}</td>
			</tr>
		{{/each}}
		</tbody>
	</table>
	<span class="label">设备</span>
	<br /> <br />
	<table class="table table-striped table-bordered table-condensed">
		<thead>
			<tr>
				<th>状态</th><th>SV_ID</th><th>名称</th><th>监控器数</th><th>禁止数</th><th>错误</th><th>危险</th><th>IP地址</th><th>设备类型</td>
			</tr>
		</thead>
		<tbody>
		{{#each getChildrenNodesByIdAndType svid "subentity"}}
			<tr>
				<td>{{status}}</td>
				<td>{{sv_id}}</td>
				<td>{{sv_name}}</td>
				<td>{{sub_monitor_sum}}</td>
				<td>{{sub_monitor_disable_sum}}</td>
				<td>{{sub_monitor_error_sum}}</td>
				<td>{{sub_monitor_warning_sum}}</td>
				<td>{{_MachineName}}</td>
				<td>{{sv_devicetype}}</td>
			</tr>
		{{/each}}
		</tbody>
	</table>
</Template>

<Template name="svg"><!-- svg 图像展示-->
	<div id="showSvg">
		<div class="well">
			<svg id="line"></svg>
		</div>
		<table class="table table-striped table-bordered table-condensed">
			<thead>
				<tr><th>返回值</th><th>最大值</th><th>平均值</th><th>最新值</th></tr>
			</thead>
			<tbody id="tableData">
					
			</tbody>
		</table>
		{{>recordsData}}
	</div>
</Template>

<Template name="recordsData"> <!-- 记录统计 -->
	<table class="table table-striped table-bordered table-condensed">
		<tbody>
			{{#with recordsData}}
			<tr><td colspan=3></td><td><button class="btn" id="monitorDetail">详细信息</button></td></tr>
			<tr><td>正常</td><td>{{ok}}</td><td>危险</td><td>{{warning}}</td></tr>
			<tr><td>错误</td><td>{{error}}</td><td>禁止</td><td>{{disable}}</td></tr>
			<tr><td>阀值</td><td colspan=3>测试条件</td></tr>
			<tr><td>时间段</td><td colspan=3></td></tr>
			<tr><td>从</td><td colspan=3>{{starttime}}</td></tr>
			<tr><td>到</td><td colspan=3>{{endtime}}</td></tr>
			{{/with}}
		</tbody>
	</table>

</Template>

<Template name="operateNode"><!--增删改操作 -->
	<div class="form-horizontal">
		{{#if sv_name}}
		<span class="label label-info">{{sv_name}}</span>
		<div class="btn-toolbar">
			{{#if equal type "group"}}
			<div class="btn-group">
				<button class="btn" id="addGroup">增加组</button>
				<button class="btn" id="editGroup">编辑组</button>
				<button class="btn" id="addEntity">增加设备</button>
				<button class="btn">更多</button>
				<button class="btn dropdown-toggle" data-toggle="dropdown">
				<span class="caret"></span>
				</button>
				<ul class="dropdown-menu pull-right">
					<li><a href="#" id="forbidGroup">禁用</a></li>
					<li class="divider"></li>
					<li><a href="#" id="removeNodes">删除组</a></li>
				</ul>
			</div>
			{{/if}}
			{{#if equal type "entity"}}
			<div class="btn-group">
				<button class="btn" id="editEntity">编辑设备</button>
				<button class="btn">更多</button>
				<button class="btn dropdown-toggle" data-toggle="dropdown">
				<span class="caret"></span>
				</button>
				<ul class="dropdown-menu pull-right">
					<li><a href="#" id="forbidEntity">禁用</a></li>
					<li class="divider"></li>
					<li><a href="#" id="removeNodes">删除设备</a></li>
				</ul>
			</div>
			<div class="btn-group">
				<button class="btn" id="addMonitor">添加监视器</button>
				<button class="btn" id="editMonitor">编辑监视器</button>
				<!--
				<button class="btn" id="deleteMonitor">删除监视器</button>-->
				<button class="btn">更多</button>
				<button class="btn dropdown-toggle" data-toggle="dropdown">
				<span class="caret"></span>
				</button>
				<ul class="dropdown-menu pull-right">	
					<li><a href="#" id="forbidMonitor">禁用</a></li>
					<li class="divider"></li>
					<li><a href="#" id="deleteMonitor">删除监视器</a></li>
				</ul>
			</div>
			{{/if}}
			
			<div class="btn-group">
				<button class="btn" id="refresh">刷新</button>
			</div>
			
		</div>
		{{/if}}
	</div>
</Template>

