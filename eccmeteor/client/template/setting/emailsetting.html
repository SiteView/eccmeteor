<Template name="emailsetting">
	<div class="form-horizontal">
		<span class="label label-info">邮件设置</span>{{ide "emailsetting"}}
		<div  class="btn-toolbar">
			<div class="btn-group">
				<button class="btn" id="addemailsetting">{{language.addbtn}}</button>
				<button class="btn" id="delemailsetting">{{language.delbtn}}</button>
			</div>
			<div class="btn-group">
				<button class="btn" id="allowemailsetting">{{language.allowbtn}}</button>
				<button class="btn" id="forbidemailsetting">{{language.forbidbtn}}</button>
				<button class="btn" id="emailtemplatesetting">{{language.templatesettiongbtn}}</button>
				<button class="btn">更多</button>
				<button class="btn dropdown-toggle" data-toggle="dropdown">
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu pull-right">	
					<li><a href="#" id="refreshemailsetting">{{language.refreshbtn}}</a></li>
					<li class="divider"></li>
					<li><a href="#" id="emailhelpmessage">{{language.helpmessagebtn}}</a></li>
				</ul>
			</div>
		</div>
	</div>
	<br />
	{{> emailsettingList}}
	<div id="emailbasicsettingFormDiv"></div>
	<div id="emailaddresssettingDiv"></div>
	<div id="emailaddresssettingeditDiv"></div>
	{{> emailtest}}
	<div id="emailTemplateSettingDiv"></div>
</Template>

<Template name="emailsettingList">
	<!--邮件列表表格展示-->
	<table class="table table-striped table-condensed table-hover">
		<thead>
			<tr></tr>
			<tr>
				<th><input type="checkbox" id="emailsettingtableselectall"></th>
				<th>{{language.nameTh}}</th>
				<th>{{language.statusTh}}</th>
				<th>{{language.emailTh}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody id="emailSettingList">
			{{#each emaillist}}
			<tr>
				<td><input type="checkbox" id="{{nIndex}}"></td>
				<td>{{Name}}</td>
				<td>{{bCheck}}</td><td>{{MailList}}</td>
				<td>
					<div class="btn-group">
						<button id="{{nIndex}}" class="btn"><i class="icon-edit"></i> {{language.emailsettingmodel.editbtn}}</button>
					</div>
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
	{{{paper}}}
</Template>

<Template name="emailbasicsettingForm">
	<!--邮件设置---基础数据设置表单-->
<form id="emailbasicsetting" class="form-horizontal" onsubmit="return false;">
 	<fieldset>
		{{#with BasicSetting}}
	    <legend>{{language.basicsettiontilte}}</legend>
	    <div class="control-group">
	      <label class="control-label">{{language.emailsettingmodel.sendserverSMTPlab}}:</label>
	      <div class="controls">
	        <input type="text" class="span4" name="server" value="{{server}}">
	      </div>
	    </div>
	    <div class="control-group">
	      <label class="control-label">{{language.emailsettingmodel.sendemailAddresslab}}:</label>
	      <div class="controls">
	        <input type="text" class="span4" name="from" value="{{from}}">
	      </div>
		</div>
		<div class="control-group">
	      <label class="control-label">{{language.emailsettingmodel.sendbackupserverlab}}:</label>
	      <div class="controls">
	        <input type="text" class="span4" name="backupserver" value="{{backupserver}}">
	      </div>
	    </div>
		<div class="control-group">
	      <label class="control-label">{{language.emailsettingmodel.usernamelab}}:</label>
	      <div class="controls">
	        <input type="text" class="span4" name="user" value="{{user}}">
	      </div>
	    </div>
		<div class="control-group">
	      <label class="control-label" >{{language.emailsettingmodel.passwordlab}}:</label>
	      <div class="controls">
	        <input type="password" class="span4" name="password" value="{{password}}">
	      </div>
	    </div>
		<div class="form-actions">
			<button class="btn btn-primary" id="emailbasicsettingapplybtn">{{language.emailsettingmodel.applybtn}}</button>
			<button class="btn" id="emailbasicsettingtestbtn">{{language.emailsettingmodel.testbtn}}</button>
		</div>
		{{/with}}
  	</fieldset>
</form>
</Template>

<Template name="emailbasicsettingofaddress">
	<div class="modal hide fade"
	data-backdrop="true" data-keyboard="true" data-show="false" 
	data-width="800" data-modalOverflow="true"
	>
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<label class="label label-info">邮件地址设置</label>{{ide "emailsetting"}}
		</div>
		<div class="modal-body">
			<form class="well form-horizontal form-inline" id="emailbasicsettingofaddressbasciinfo">
				<fieldset>
					<span class="label label-info">基本选项</span><br /><br />
					<div class="control-group">
					  <label class="control-label">*名称:</label>
					  <div class="controls">
						<input type="text"  name="Name">
					  </div>
					</div>
					<div class="control-group">
					  <label class="control-label">*接收Email地址:</label>
					  <div class="controls">
						<input type="text"  name="MailList">
					  </div>
					</div>
					<div class="control-group">
					  <label class="control-label">状态:</label>
					  <div class="controls">
						<label class="radio">
							<input type="radio"  name="bCheck" value="0" checked> 允许
						</label>
						<label class="radio">
							<input type="radio"  name="bCheck" value="1"> 禁止
						</label>
					  </div>
					</div>
					<span class="label label-info">高级选项</span><br /><br />
					<div class="control-group">
						<label class="control-label">Email模板:</label>
						<div class="controls">
							<select id="emailbasicsettingofaddressemailtemplatelist" name="Template">
							{{#each EmailTemplate}}
								<option value="{{this}}">{{this}}</option>
							{{/each}}
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">任务计划类型:</label>
						<div class="controls">
							<select name="TaskType" id="emailTaskTypelist">
								<option value="1">绝对时间任务计划</option>
								<option value="2" selected>时间段任务计划</option>
								<option value="3">相对时间任务计划</option>
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">任务计划:</label>
						<div class="controls">
							<select name="Schedule" id="emailSchedulelist">
							{{#each Tasks}}
								<option value="{{this}}">{{this}}</option>
							{{/each}}	
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">描述:</label>
						<div class="controls">
							<textarea class="input-xlarge" name="Des" rows="3"></textarea>
						</div>
					</div>
				</fieldset>
			</form>
		</div>
		<div class="modal-footer" align="right">
			<button class="btn btn-primary" id="emailbasicsettingofaddresssavebtn">保存</button>
			<button class="btn" id="emailbasicsettingofaddresscancelbtn">取消</button>
		</div>
	</div>
</Template>


<Template name="emailbasicsettingofaddressedit">
	<div class="modal hide fade" data-backdrop="true" data-keyboard="true" data-show="false" 
	data-width="800" data-modalOverflow="true">
		<div class="modal-header">			
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<label class="label label-info">邮件地址设置</label>{{ide "emailsetting"}}
		</div>
		<div class="modal-body">
			{{#with EmailInfo}}
			<form class="well form-horizontal form-inline" id="emailbasicsettingofaddressbasciinfoedit">
				<input type="hidden" name="nIndex" value="{{Email.nIndex}}">
				<fieldset>
					<span class="label label-info">基本选项</span><br /><br />
					<div class="control-group">
					  <label class="control-label">*名称:</label>
					  <div class="controls">
						<input type="text"  name="Name" value="{{Email.Name}}">
					  </div>
					</div>
					<div class="control-group">
					  <label class="control-label">*接收Email地址:</label>
					  <div class="controls">
						<input type="text"  name="MailList" value="{{Email.MailList}}">
					  </div>
					</div>
					<div class="control-group">
					  <label class="control-label">状态:</label>
					  <div class="controls">
						<label class="radio">
							<input type="radio"  name="bCheck" value="0" {{#if equal Email.bCheck "0"}}checked="checked"{{/if}}> 允许
						</label>
						<label class="radio">
							<input type="radio"  name="bCheck" value="1" {{#if equal Email.bCheck "1"}}checked="checked"{{/if}}> 禁止
						</label>
					  </div>
					</div>
					<span class="label label-info">高级选项</span><br /><br />
					<div class="control-group">
						<label class="control-label">Email模板:</label>
						<div class="controls">
							<select id="emailbasicsettingofaddressemailtemplatelistedit" name="Template">
							{{#each EmailTemplate}}
								<option value="{{this}}">{{this}}</option>
							{{/each}}
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">任务计划类型:</label>
						<div class="controls">
							<select name="TaskType" id="editemailTaskTypelist">
								<option value="1" {{#if equal Email.TaskType "1"}}selected {{/if}}>绝对时间任务计划</option>
								<option value="2" {{#if equal Email.TaskType "2"}}selected {{/if}}>时间段任务计划</option>
								<option value="3" {{#if equal Email.TaskType "3"}}selected {{/if}}>相对时间任务计划</option>
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">任务计划:</label>
						<div class="controls">
							<select name="Schedule" id="editemailSchedulelist">
							{{#each Tasks}}
								<option value="{{this}}">{{this}}</option>
							{{/each}}	
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">描述:</label>
						<div class="controls">
							<textarea class="input-xlarge" name="Des" rows="3">{{Email.Des}}</textarea>
						</div>
					</div>
				</fieldset>
			</form>
			{{/with}}
		</div>
		<div class="modal-footer" align="right">
			<button class="btn" id="emailbasicsettingofaddresscancelbtnedit">取消</button>
			<button class="btn btn-primary" id="emailbasicsettingofaddresssavebtnedit">保存</button>
		</div>
	</div>
</Template>

<Template name="emailtest">
	<div id="emailTestDiv" class="modal hide fade"
	data-backdrop="true" data-keyboard="true" data-show="false" 
	data-width="400" data-modalOverflow="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<label class="label label-info">邮件测试</label>
		</div>
		<div class="modal-body">
			<form class="well" id="emailtestform">
				<label class="label label-info">email测试</label>
				<div class="controls">
					<label class="control-label">邮件接收地址:(填写多个地址时以逗号分开)</label>
					<div class="controls">
						<input class="input-xlarge" type="text" name="mailTo" />
					</div>
				</div>
				<div class="controls">
					<label class="control-label">邮件内容:</label>
					<div class="controls">
						<textarea class="input-xlarge" name="content" rows="5"></textarea>
					</div>
				</div>
			</form>
		</div>
		<div class="modal-footer" align="center">
			<button class="btn" id="suresendemail">确定</button>
			<button class="btn" id="cancelsendemail">关闭</button>
		</div>
	</div>
</Template>
