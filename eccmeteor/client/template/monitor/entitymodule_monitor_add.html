<!--监视器添加-->
<Template name="AddMoniorFormModal">
	<div 
		class="modal hide fade"
		data-backdrop="static" data-keyboard="true" data-show="false" 
		data-maxHeight='500' data-width="800" data-height="600" data-modalOverflow="true"
	>
	<div class="modal-header">			
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		<label class="label label-info">
			设备 {{devicename}} {{ActionType}} {{monitorType}} 监视器
		</label>
	</div>
	<div class="modal-body">
		<input type="hidden" value="{{{monitorTemplateId}}}"/>
		<span class="label label-info">基本信息</span><br /><br />
		<form id="monityTemplateParameter">
		<table class="table table-striped table-bordered table-condensed">
			<tbody>
			<tr class="controls">
				<td>
					{{MonityFrequencyLabel}}
				</td>
				<td>
					{{!-- createDomByObjListHelper MonityFrequencyDom --}}
					{{#each MonityFrequencyDom}}
						{{#if equal sv_type "textbox"}}
							<input type="text" name="{{sv_name}}" value="{{sv_value}}"
								{{#if equal sv_isreadonly "true"}}readonly{{/if}}
							/>
							{{else}}
							<select name="{{sv_name}}">
								{{#each selects}}
									<option value="{{value}}">{{key}}</option>
								{{/each}}
							</select>
						{{/if}}
					{{/each}}
				</td>
			</tr>
			{{#each MonityTemplateParameters}}
				<tr>
					<td>
						{{#unless sv_allownull}}*{{/unless}}{{sv_label}}:
					</td>
					<td>
						{{!-- createDomeByPropertyHelper this--}}
						{{#if equal sv_type "textbox"}}
							<input type="text" name="{{sv_name}}" value="{{sv_value}}" {{#if equal sv_isreadonly "true"}}readonly{{/if}}/>
						{{/if}}

						{{#if equal sv_type "password"}}
							<input type="password" name="{{sv_name}}" value="{{sv_value}}"  {{#if equal sv_isreadonly "true"}}readonly{{/if}} />
						{{/if}}

						{{#if equal sv_type "combobox"}}
							<select name="{{sv_name}}">
								{{#each selects}}				
									<option value="{{value}}" {{#if equal sv_value value}}selected='selected' {{/if}}>{{key}}</option>
								{{/each}}
							</select>
						{{/if}}

						{{#if equal sv_type "textarea"}}
							<textarea name="{{sv_name}}">{{sv_value}}</textarea>
						{{/if}}
					</td>
				</tr>
			{{/each}}
			</tbody>
		</table>
		</form>
		<hr />
		<span class="label label-info">报警条件</span><br /><br />
		<div class="accordion" id="MonitorStatusAccordion">
			<div class="accordion-group">
				<div class="accordion-heading">
					<div class="accordion-toggle well" style="margin-bottom:0px" data-toggle="collapse" data-parent="#MonitorStatusAccordion" href="#errorsStatusIndex">
						<div><span class="label label-important">错误条件：</span></div>
						<div class="MonitorStatusConditionsDiv">
							{{#with Error}}
								{{sv_value}}
							{{/with}}
						</div>
					</div>
				</div>
				<div id="errorsStatusIndex" class="accordion-body collapse">
					<div class="accordion-inner" id="errorsStatusDiv">
						{{> monitorTemplateStatus}}
						<table class="table table-striped table-bordered table-condensed">
							<thead>
								<tr>
									<th class="span1">
										<input type="checkbox"/>&nbsp;<i class="icon-trash"></i>
									</th>
									<th>项目</th>
									<th>操作符</th>
									<th>值</th>
									<th>关系</th>
								</tr>
							</thead>
							<tbody id="errorsStatusTable">
								{{#with Error}}
									{{> monitorTemplateInitStatusTableTr}}
								{{/with}}
							</tbody>
						</table>
						<form id="errorsStatusForm">
							<input type="hidden" class="sv_conditioncount" name="sv_conditioncount" value="1">
							{{#with Error}}
								{{> monitorTemplateInitStatusInputHidden}}
							{{/with}}
						</form>
					</div>
				</div>
			</div>
			<div class="accordion-group">
				<div class="accordion-heading">
					<div class="accordion-toggle well" style="margin-bottom:0px" data-toggle="collapse" data-parent="#MonitorStatusAccordion" href="#warningStatusIndex">
						<div><span class="label label-warning">危险条件：</span></div>
						<div class="MonitorStatusConditionsDiv">
							{{#with Warning}}
								{{sv_value}}
							{{/with}}
						</div>
					</div>
				</div>
				<div id="warningStatusIndex" class="accordion-body collapse">
					<div class="accordion-inner" id="warningStatusDiv">
						{{> monitorTemplateStatus}}
						<table class="table table-striped table-bordered table-condensed">
							<thead>
								<tr>
									<th class="span1">
										<input type="checkbox"/>&nbsp;<i class="icon-trash"></i>
									</th>
									<th>项目</th>
									<th>操作符</th>
									<th>值</th>
									<th>关系</th>
								</tr>
							</thead>
							<tbody id="warningStatusTable">
								{{#with Warning}}
									{{> monitorTemplateInitStatusTableTr}}
								{{/with}}
							</tbody>
						</table>
						<form id="warningStatusForm">
							<input type="hidden" class="sv_conditioncount" name="sv_conditioncount" value="1">
							{{#with Warning}}
								{{> monitorTemplateInitStatusInputHidden}}
							{{/with}}
						</form>
					</div>
				</div>
			</div>
			<div class="accordion-group">
				<div class="accordion-heading">
					<div class="accordion-toggle well" style="margin-bottom:0px" data-toggle="collapse" data-parent="#MonitorStatusAccordion" href="#goodStatusIndex">
						<div>
							<span class="label label-success">正常条件：</span>
						</div>
						<div class="MonitorStatusConditionsDiv">
							{{#with Good}}
								{{sv_value}}
							{{/with}}
						</div>
					</div>
				</div>
				<div id="goodStatusIndex" class="accordion-body collapse">
					<div class="accordion-inner" id="goodStatusDiv">
						{{> monitorTemplateStatus}}
						<table  class="table table-striped table-bordered table-condensed">
							<thead>
								<tr>
									<th class="span1">
										<input type="checkbox"/>&nbsp;<i class="icon-trash"></i>
									</th>
									<th>项目</th>
									<th>操作符</th>
									<th>值</th>
									<th>关系</th>
								</tr>
							</thead>
							<tbody id="goodStatusTable">
								{{#with Good}}
									{{> monitorTemplateInitStatusTableTr}}
								{{/with}}
							</tbody>
						</table>
						<form id="goodStatusForm">
							<input type="hidden" class="sv_conditioncount" name="sv_conditioncount" value="1">
							{{#with Good}}
								{{> monitorTemplateInitStatusInputHidden}}
							{{/with}}
						</form>
					</div>
				</div>
			</div>
		</div>
		<hr />
		<span class="label label-info">高级选项</span><br /><br />
		<form id="monityTemplateAdvanceParameters" class="table table-striped table-bordered table-condensed">
		<table>
			<tbody>
				{{#each MonityTemplateAdvanceParameters}}
				<tr>
					<td>
					{{sv_label}}:
					</td>
					<td>
					{{#if equal sv_type "textbox"}}
						<input type="text" name="{{sv_name}}" value="{{sv_value}}"
							{{#if equal sv_isreadonly "true"}}readonly{{/if}}
						/>
						{{else}}
						<select name="{{sv_name}}">
							{{#each selects}}
								<option value="{{value}}">{{key}}</option>
							{{/each}}
						</select>
					{{/if}}
					</td>
				</tr>
				{{/each}}
			</tbody>
		</table>
		</form>
		<form id="monityTemplateCommonParameters" class="table table-striped table-bordered table-condensed">
			<table>
				<tr>
					<td>
						校验错误:
					</td>
					<td>
						<input type="checkbox" value="true" name="sv_checkerr" checked="checked">监测器错误检验
					</td>
				</tr>
				<tr>
					<td>
						错误时监测频率:
					</td>
					<td>
						<input type="text" name="sv_errfreqsave">
						<select name="sv_errfrequint">
							<option value="1">分钟</option>
							<option value="2">小时</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						计划任务
					</td>
					<td>
						<select name="sv_plan">
							{{#each AllTaskNames}}
								<option value="{{this}}">{{this}}</option>
							{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>
						监测描述
					</td>
					<td>
						<textarea name="sv_description"></textarea>
					</td>
				</tr>
				<tr>
					<td>
						报告描述
					</td>
					<td>
						<textarea name="sv_reportdesc"></textarea>
					</td>
				</tr>
		</table>
		</form>	
	</div>
	<div class="modal-footer" align="right">
		<button class="btn btn-primary" id="monityTemplateFormsSavelBtn">保存</button>
		<button class="btn" id="monityTemplateFormsCancelBtn">取消</button>
	</div>
	</div>
</Template>

<Template name="monitorTemplateStatus">
	<form class="well form-inline">
		<select name="sv_paramname">
			{{#each MonityTemplateReturnItems}}
			<option value="{{sv_name}}">{{sv_label}}</option>
			{{/each}}
		</select>
		<select name="sv_operate">
			<option value="==">==</option>
			<option value="!=">!=</option>
			<option value=">=">>=</option>
			<option value=">">></option>
			<option value="<="><=</option>
			<option value="<"><</option>
			<option value="!contains">!contains</option>
			<option value="contains">contains</option>
		</select>
		<input type="text" name="sv_paramvalue"><br /> <br />
		<label class="checkbox">
			<span>关系</span>
			<input type="radio" name="sv_relation" value="or" checked> 或  
			<input type="radio" name="sv_relation" value="and"> 与  
		</label>
		<!--<a href="javascript:void(0)" class="btn .btn-small">添加</a>-->
		<button class="btn .btn-small" id="monitorTemplateStatusAddConditions">添加</button>
	</form>
</Template>

<Template name="monitorTemplateInitStatusTableTr">
	<tr id="tr1">
		<td><input type="checkbox"></td>
		<td>{{sv_paramname1}}</td>
		<td>{{sv_operate1}}</td>
		<td>{{sv_paramvalue1}}</td>
		<td>{{sv_relation1}}</td>
	</tr>
</Template>

<Template name="monitorTemplateInitStatusInputHidden">
	<input type="hidden" name="sv_paramname1" value="{{sv_paramname1}}">
	<input type="hidden" name="sv_operate1" value="{{sv_operate1}}">
	<input type="hidden" name="sv_paramvalue1" value="{{sv_paramvalue1}}">
</Template>